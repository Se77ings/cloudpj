<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../lib/script.js"></script>
  <link rel="stylesheet" href="../lib/style/style.css" />
  <title>Financeiro Main</title>
  <style>
    #navOptions {
      margin-left: 20px;
      padding: 3px;
      border: solid 1px black;
      border-radius: 6px;
      margin-top: 10px;
    }

    #navOptions:hover {
      cursor: pointer;
    }
  </style>
</head>

<body>
  <header>
    <div>
      <h1 onclick="redireciona(0)">Header</h1>
      <p onclick="redireciona(1)" class="headerNav">Financeiro</p>
    </div>
  </header>
  <header style="display: flex">
    <p id="navOptions" onclick="opcoesFrame(1)">Cadastrar Títulos</p>
    <p id="navOptions" onclick="opcoesFrame(2)">Carteira</p>
    <p id="navOptions" onclick="opcoesFrame(3)">Quitar Títulos</p>
  </header>

  <iframe id="main" style="border: solid blue 1px" width="100%" height="850px" frameborder="1"></iframe>
  <p>Ideias soltas:</p>
  <p>
    pensando no processo de tras pra frente, preciso entao lançar uma compra,
    depois quitá-la.
  </p>
  <p>
    tenho que ter também um controle de saldo (nisso ja inclui cadastro de
    pessoa, perfil, etc e tal)
  </p>
  <p>
    Tabelas: Títulos:(Direitos e obrigações), Balanço(Saldo e tal), Transação
  </p>
  <p><br /></p>
  <p>
    a Transação seria uma tabela intermediaria, tipo a que eu tenho dos
    logs... aonde nela deve ter:
  </p>
  <p>
    O valor da transação, qual o título ela interferiu, datas, e qual conta
    foi debitada
  </p>
  <p>
    Cuspindo pensamentos (agora) é como se eu fosse fazer um balanço
    patrimonial
  </p>
  <script>
    var previousSrc = null;
    opcoesFrame(1);


    function executeFooEveryTwoSeconds() {
      atualizaFrame(); // Chama a função foo() imediatamente

      setTimeout(function () {
        executeFooEveryTwoSeconds(); // Chama a função recursivamente a cada 2 segundos
      }, 2000); // 2000 milissegundos = 2 segundos
    }

    // executeFooEveryTwoSeconds();

    document.getElementById("main").addEventListener("load", function () {
      var currentSrc = this.src;

      if (previousSrc !== currentSrc) {
        previousSrc = currentSrc;
        atualizaFrame();
      }
    });
    function atualizaFrame() {
      var foo = document.getElementById("main");
      foo.contentDocument.location.reload(true);
      // console.log("atualizou");
    }
    function opcoesFrame(opt) {
      var main = document.getElementById("main");
      if (opt == 1) {
        main.src = "Pagamentos/Pagamentos.html";
      } else if (opt == 2) {
        main.src = "Balanco/Fundos.html";
      } else if (opt == 3) {
        main.src = "Titulos/Titulos.html";
      }
    }
  </script>
</body>

</html>